<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æ¨ã—ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼2â™¡</title>
  <!-- SEOç”¨ -->
  <meta name="description" content="æ¨ã—ã‚­ãƒ£ãƒ©ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒç°¡å˜ã«ä½œã‚Œã‚‹â™¡ã‚«ãƒ©ãƒ¼å¤‰æ›´æ©Ÿèƒ½ã¤ãã®å¯æ„›ã„ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼ã€‚ç”»åƒä¿å­˜ï¼†SNSã‚·ã‚§ã‚¢å¯¾å¿œï¼">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  
  <!-- OGP -->
  <meta property="og:title" content="æ¨ã—ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼2â™¡">
  <meta property="og:description" content="æ¨ã—è‰²ã«æŸ“ã‚ã‚‰ã‚Œã‚‹ï¼ã‚ãªãŸã®æ¨ã—ã‚’ã‹ã‚ã„ãç´¹ä»‹ã—ã¡ã‚ƒãŠã†â™¡">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mofu-mitsu.github.io/oshi-profile-maker2/">
  <meta property="og:image" content="https://mofu-mitsu.github.io/oshi-profile-maker2/ogp.png">
  <meta name="twitter:card" content="summary_large_image">

  <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ’–</text></svg>">

  <!-- ãƒ•ã‚©ãƒ³ãƒˆï¼†ã‚¢ã‚¤ã‚³ãƒ³ -->
  <link href="https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@400;500&family=M+PLUS+Rounded+1c:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --theme-color: #ffb7c5; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è‰²ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰ */
      --bg-color: #fff0f5;
      --text-color: #555;
    }

    body {
      font-family: 'M PLUS Rounded 1c', 'Kiwi Maru', sans-serif;
      margin: 0;
      padding: 0;
      padding-bottom: 150px;
      background-color: var(--bg-color);
      /* èƒŒæ™¯ã«ãƒ‰ãƒƒãƒˆæŸ„ */
      background-image: 
        radial-gradient(var(--theme-color) 20%, transparent 20%),
        radial-gradient(var(--theme-color) 20%, transparent 20%);
      background-size: 30px 30px;
      background-position: 0 0, 15px 15px;
      background-attachment: fixed;
      color: var(--text-color);
      overflow-x: hidden;
      transition: background-image 0.3s;
    }

    body::after {
      content: "";
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(255, 255, 255, 0.85);
      z-index: -1;
    }

    /* ã‚¿ã‚¤ãƒˆãƒ«è£…é£¾ï¼ˆå¯æ„›ãå¼·èª¿ï¼ï¼‰ */
    h1 {
      text-align: center;
      color: var(--theme-color);
      font-family: 'Kiwi Maru', serif;
      margin-top: 40px;
      margin-bottom: 20px;
      font-size: 1.6rem;
      
      /* ãƒãƒƒãƒ—ãªã‚¹ãƒ†ãƒƒãƒé¢¨æ ç·š */
      background: #fff;
      display: inline-block;
      padding: 15px 40px;
      border-radius: 50px;
      border: 4px dotted var(--theme-color);
      box-shadow: 0 6px 0 rgba(0,0,0,0.1);
      
      position: relative;
      left: 50%;
      transform: translateX(-50%);
      max-width: 90%;
      white-space: nowrap;
    }

    /* å¹ãå‡ºã—ã®ã—ã£ã½ */
    h1::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      border-top: 15px solid var(--theme-color);
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
    }
    
    /* ä¸­ã®ç™½æŠœãã—ã£ã½ */
    h1::before {
      content: '';
      position: absolute;
      bottom: -9px;
      left: 50%;
      transform: translateX(-50%);
      border-top: 15px solid #fff;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      z-index: 1;
    }

    .container {
      max-width: 600px;
      margin: 20px auto;
      position: relative;
      z-index: 1;
    }

    /* ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã‚¨ãƒªã‚¢ */
    .color-setting {
      background: #fff;
      padding: 15px 25px;
      border-radius: 50px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      text-align: center;
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      border: 2px solid #fff;
      width: fit-content;
      margin-left: auto;
      margin-right: auto;
    }

    .color-setting label {
      margin: 0;
      color: var(--text-color);
      font-weight: bold;
    }

    input[type="color"] {
      border: none;
      width: 40px;
      height: 40px;
      cursor: pointer;
      background: none;
      border-radius: 50%;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    /* --- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰æœ¬ä½“ --- */
    #profileDisplayArea {
      padding: 10px; 
    }

    .profile-card {
      background: #fff;
      border-radius: 20px;
      padding: 40px 30px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      border: 3px solid var(--theme-color);
      position: relative;
      margin-bottom: 30px;
      background-image: 
        linear-gradient(to right, rgba(0,0,0,0.03) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(0,0,0,0.03) 1px, transparent 1px);
      background-size: 20px 20px;
    }

    /* ä¸Šéƒ¨ã®è£…é£¾ */
    .profile-card::before {
      content: "â™¥ PROFIL â™¥";
      position: absolute;
      top: -15px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--theme-color);
      color: #fff;
      padding: 5px 20px;
      border-radius: 20px;
      font-weight: bold;
      font-family: 'Kiwi Maru', serif;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border: 2px solid #fff;
    }

    /* ç”»åƒã‚¨ãƒªã‚¢ */
    .image-area {
      text-align: center;
      margin-bottom: 25px;
      position: relative;
    }

    .custom-file-upload {
      display: inline-block;
      cursor: pointer;
      position: relative;
      transition: transform 0.2s;
    }
    
    .custom-file-upload:hover {
      transform: scale(1.02);
    }

    .custom-file-upload input[type="file"] {
      display: none;
    }

    .img-placeholder {
      width: 140px;
      height: 140px;
      background-color: #fff;
      border: 3px dashed var(--theme-color);
      border-radius: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--theme-color);
      font-weight: bold;
      margin: 0 auto;
      overflow: hidden;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .img-placeholder img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
    }

    .img-placeholder i {
      font-size: 2rem;
      margin-bottom: 5px;
    }

    /* å…¥åŠ›æ¬„ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
    .input-row {
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: bold;
      color: var(--theme-color);
      font-size: 0.95rem;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    input[type="text"],
    input[type="url"],
    textarea,
    .sukiTextDisplay {
      width: 100%;
      padding: 8px 5px;
      border: none;
      border-bottom: 2px dashed #ccc;
      border-radius: 0;
      box-sizing: border-box;
      font-size: 1rem;
      font-family: 'Kiwi Maru', sans-serif;
      background: transparent;
      color: #333;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus,
    input[type="url"]:focus,
    textarea:focus,
    .sukiTextDisplay:focus {
      outline: none;
      border-bottom: 2px solid var(--theme-color);
    }

    .sukiTextDisplay {
      min-height: 80px;
      border: 2px solid #eee;
      border-radius: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.8);
      white-space: pre-wrap;
    }
    
    .sukiTextDisplay:focus {
      border-color: var(--theme-color);
    }

    ::placeholder {
      color: #ccc;
      font-size: 0.9rem;
    }

    /* ãƒœã‚¿ãƒ³é¡ */
    button {
      padding: 12px 25px;
      border: none;
      border-radius: 50px;
      background-color: var(--theme-color);
      color: white;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      font-family: 'M PLUS Rounded 1c', sans-serif;
      margin: 5px;
      font-size: 0.95rem;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    }

    /* ã‚·ã‚§ã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³ */
    .share-options {
      background: #fff;
      padding: 20px;
      border-radius: 20px;
      text-align: center;
      margin-top: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.05);
      border: 2px solid var(--theme-color);
    }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    .ad-footer {
      text-align: center;
      padding: 20px;
      background: rgba(255,255,255,0.8);
      border-top: 3px dashed var(--theme-color);
      margin-top: 40px;
    }
    .ad-banner img {
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin: 5px;
    }

    .footer-nav {
      position: fixed;
      bottom: 0; left: 0; width: 100%;
      background: rgba(255,255,255,0.95);
      padding: 12px;
      text-align: center;
      z-index: 999;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
      border-top: 2px solid var(--theme-color);
    }
    .footer-nav a {
      color: var(--theme-color);
      font-weight: bold;
      text-decoration: none;
    }

    /* ã‚¹ãƒãƒ›èª¿æ•´ */
    @media screen and (max-width: 600px) {
      .container { width: 95%; margin-top: 10px;}
      .profile-card { padding: 30px 20px; }
      h1 { font-size: 1.3rem; padding: 12px 25px; }
    }

  </style>
</head>
<body>

  <h1>æ¨ã—ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼2â™¡</h1>

  <div class="container">
    <!-- ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã‚¨ãƒªã‚¢ -->
    <div class="color-setting">
      <label><i class="fa-solid fa-paintbrush"></i> æ¨ã—è‰²ã«å¤‰æ›´</label>
      <input type="color" id="themeColorInput" value="#ffb7c5" onchange="changeThemeColor(this.value)">
    </div>

    <!-- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºãƒ»å…¥åŠ›ã‚¨ãƒªã‚¢ -->
    <div id="profileDisplayArea">
      <div class="profile-card" data-id="1">
        
        <!-- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
        <div class="image-area">
          <label class="custom-file-upload">
            <input type="file" accept="image/*" onchange="previewImage(this)">
            <div class="img-placeholder">
              <div class="placeholder-text">
                <i class="fa-regular fa-image"></i><br>ç”»åƒã‚’é¸æŠ
              </div>
              <img class="preview" src="">
            </div>
          </label>
        </div>

        <!-- å…¥åŠ›é …ç›®ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’æ±ç”¨çš„ã«å¤‰æ›´ï¼‰ -->
        <div class="input-row">
          <label><i class="fa-solid fa-heart"></i> åå‰</label>
          <input type="text" placeholder="æ¨ã—ã®åå‰ã‚’å…¥åŠ›">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-star"></i> ã‚ã å</label>
          <input type="text" placeholder="å‘¼ã³æ–¹ãªã©ã‚’å…¥åŠ›">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-comment-dots"></i> ä¸€è¨€</label>
          <input type="text" placeholder="æ¨ã—ã‚’ä¸€è¨€ã§è¨€ã†ã¨ï¼Ÿ">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-handshake"></i> å‡ºä¼šã„</label>
          <input type="text" placeholder="å¥½ãã«ãªã£ãŸãã£ã‹ã‘">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-cake-candles"></i> èª•ç”Ÿæ—¥</label>
          <input type="text" placeholder="æ—¥ä»˜ã‚’å…¥åŠ›">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-utensils"></i> å¥½ããªé£Ÿã¹ç‰©</label>
          <input type="text" placeholder="å¥½ç‰©ã‚’å…¥åŠ›">
        </div>
        <div class="input-row">
          <label><i class="fa-solid fa-pen-fancy"></i> ã“ã“ãŒå¥½ãï¼</label>
          <div class="sukiTextDisplay" contenteditable="true" data-placeholder="æ¨ã—ã®å°Šã„ãƒã‚¤ãƒ³ãƒˆã‚’èªã£ã¦ã­ï¼"></div>
        </div>
        <div class="input-row">
          <label><i class="fa-brands fa-twitter"></i> SNSãƒªãƒ³ã‚¯ï¼ˆä»»æ„ï¼‰</label>
          <input type="url" placeholder="URLã‚’å…¥åŠ›">
        </div>

        <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ï¼ˆJSã§è¿½åŠ ã•ã‚ŒãŸæ™‚ç”¨ï¼‰ -->
        <div class="delete-area" style="text-align:right; display:none;">
           <button onclick="deleteProfile(this)" style="font-size:0.8rem; padding:5px 10px; background:#ccc; box-shadow:none;">å‰Šé™¤</button>
        </div>

      </div>
    </div>

    <!-- æ“ä½œãƒœã‚¿ãƒ³ -->
    <div style="text-align: center; margin-top:30px;">
      <button onclick="addProfile()"><i class="fa-solid fa-plus"></i> è¿½åŠ </button>
      <button onclick="showShareOptions()"><i class="fa-solid fa-share-nodes"></i> å®Œæˆã—ã¦ã‚·ã‚§ã‚¢</button>
      <button onclick="toggleHowTo()"><i class="fa-solid fa-circle-question"></i> ä½¿ã„æ–¹</button>
    </div>

    <!-- ã‚·ã‚§ã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ã«å¤‰æ›´ï¼ï¼‰ -->
    <div class="share-options" id="shareOptions" style="display: none;">
      <p style="font-weight:bold; color:var(--theme-color);">ï¼¼ å®Œæˆï¼ ï¼</p>
      <div style="display:flex; justify-content:center; flex-wrap:wrap;">
        <button onclick="nativeShare()"><i class="fa-solid fa-arrow-up-from-bracket"></i> å…±æœ‰</button>
        <button onclick="saveAsImage()"><i class="fa-solid fa-download"></i> ç”»åƒä¿å­˜</button>
      </div>
      <div id="imagePreviewContainer"></div>
    </div>

    <!-- ä½¿ã„æ–¹ -->
    <div id="howto-section" style="display:none; margin: 30px auto; background:#fff; padding:20px; border-radius:15px; border:2px dashed #ccc;">
      <h3 style="color:var(--theme-color); text-align:center;">â™¡ ä½¿ã„æ–¹ â™¡</h3>
      <p>1. ä¸Šã®ã‚«ãƒ©ãƒ¼ãƒ”ãƒƒã‚«ãƒ¼ã§ã€Œæ¨ã—ã®è‰²ã€ã‚’é¸ã‚“ã§ã­ï¼</p>
      <p>2. ç”»åƒã‚’ã‚¿ãƒƒãƒ—ã—ã¦æ¨ã—ã®å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ï¼</p>
      <p>3. ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å…¥åŠ›ã—ã¦ã­ã€‚ã€Œã“ã“ãŒå¥½ãã€ã¯æ”¹è¡Œã‚‚ã§ãã‚‹ã‚ˆã€‚</p>
      <p>4. ã€Œå®Œæˆã—ã¦ã‚·ã‚§ã‚¢ã€ã§ç”»åƒã‚’ä¿å­˜ã—ãŸã‚ŠURLã‚’å…±æœ‰ã§ãã‚‹ã‚ˆï¼</p>
    </div>

  </div>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼åºƒå‘Šã‚¨ãƒªã‚¢ -->
  <footer class="ad-footer">
    <p style="color:var(--theme-color); font-weight:bold; margin-bottom:10px;">â™¡ æ¨ã—æ´»ã«ãŠã™ã™ã‚ã‚°ãƒƒã‚º â™¡</p>
    <div class="ad-banner" style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap;">
      <a href="https://hb.afl.rakuten.co.jp/ichiba/47cc762a.4f5bdc03.47cc762b.b1296f7f/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Ftiarise%2Faiaigasa-key%2F" target="_blank" rel="nofollow sponsored noopener"><img src="https://hbb.afl.rakuten.co.jp/hgb/47cc762a.4f5bdc03.47cc762b.b1296f7f/?me_id=1337621&item_id=10000469&pc=https%3A%2F%2Fthumbnail.image.rakuten.co.jp%2F%400_mall%2Ftiarise%2Fcabinet%2Fproducts01%2Fkeyholder%2Fitem1_iuk.jpg%3F_ex%3D80x80&s=80x80&t=pict"></a>
      <a href="https://hb.afl.rakuten.co.jp/ichiba/47cd1bba.09c028b2.47cd1bbc.e3d2cf97/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fsaku-saku-shop%2Fbag-rrd001%2F" target="_blank" rel="nofollow sponsored noopener"><img src="https://hbb.afl.rakuten.co.jp/hgb/47cd1bba.09c028b2.47cd1bbc.e3d2cf97/?me_id=1281585&item_id=10001273&pc=https%3A%2F%2Fthumbnail.image.rakuten.co.jp%2F%400_mall%2Fsaku-saku-shop%2Fcabinet%2Fmado_normal%2Frrd001-mado.jpg%3F_ex%3D80x80&s=80x80&t=pict"></a>
    </div>
  </footer>

  <!-- å›ºå®šTOPæˆ»ã‚‹ -->
  <div class="footer-nav">
    <a href="https://mofu-mitsu.github.io/"><i class="fa-solid fa-house"></i> ã‚‚ãµã¿ã¤å·¥æˆ¿ TOPã¸æˆ»ã‚‹</a>
  </div>

  <!-- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const oshiMakerUrl = 'https://mofu-mitsu.github.io/oshi-profile-maker2/';

    // â˜…ã‚«ãƒ©ãƒ¼å¤‰æ›´æ©Ÿèƒ½
    function changeThemeColor(color) {
      document.documentElement.style.setProperty('--theme-color', color);
    }

    // ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
    function previewImage(input) {
      const file = input.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function (e) {
        const container = input.closest('.custom-file-upload');
        const preview = container.querySelector('.preview');
        const placeholder = container.querySelector('.placeholder-text');
        if (preview) {
          preview.src = e.target.result;
          preview.style.display = 'block';
          if(placeholder) placeholder.style.display = 'none';
        }
      };
      reader.readAsDataURL(file);
    }

    // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¿½åŠ 
    function addProfile() {
      const displayArea = document.getElementById("profileDisplayArea");
      const original = document.querySelector('.profile-card');
      const clone = original.cloneNode(true);
      
      // ä¸­èº«ã‚’ãƒªã‚»ãƒƒãƒˆ
      clone.querySelector('input[type="file"]').value = "";
      clone.querySelector('.preview').src = "";
      clone.querySelector('.preview').style.display = "none";
      if(clone.querySelector('.placeholder-text')) clone.querySelector('.placeholder-text').style.display = "block";
      
      clone.querySelectorAll('input[type="text"], input[type="url"]').forEach(input => input.value = "");
      clone.querySelector('.sukiTextDisplay').innerHTML = "";
      
      // å‰Šé™¤ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
      clone.querySelector('.delete-area').style.display = "block";
      
      displayArea.appendChild(clone);
    }

    // ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å‰Šé™¤
    function deleteProfile(btn) {
      const card = btn.closest('.profile-card');
      card.remove();
    }

    // ä½¿ã„æ–¹è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
    function toggleHowTo() {
      const section = document.getElementById('howto-section');
      section.style.display = (section.style.display === 'block') ? 'none' : 'block';
    }

    // ã‚·ã‚§ã‚¢ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¡¨ç¤º
    function showShareOptions() {
      document.getElementById("shareOptions").style.display = "block";
      document.getElementById("shareOptions").scrollIntoView({behavior: "smooth"});
    }

    // ç”»åƒä¿å­˜å‡¦ç†
    function saveAsImage() {
      const element = document.getElementById('profileDisplayArea');
      const btn = event.currentTarget;
      const originalText = btn.innerHTML;
      btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> ç”Ÿæˆä¸­...';

      html2canvas(element, { scale: 3, backgroundColor: null, useCORS: true }).then(canvas => {
        const dataURL = canvas.toDataURL('image/png');
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        const previewContainer = document.getElementById('imagePreviewContainer');
        previewContainer.innerHTML = '';

        if (!isMobile) {
          const link = document.createElement('a');
          link.href = dataURL;
          link.download = `oshi-profile-${Date.now()}.png`;
          link.click();
        } else {
          const img = document.createElement('img');
          img.src = dataURL;
          img.style = 'max-width: 100%; border-radius:15px; box-shadow:0 5px 15px rgba(0,0,0,0.1); margin-top:10px;';
          previewContainer.appendChild(img);
          const note = document.createElement('p');
          note.innerHTML = 'â˜ï¸ <strong>ç”»åƒã‚’é•·æŠ¼ã—ã—ã¦ä¿å­˜</strong>ã—ã¦ã­ï¼';
          note.style.color = '#d65d7a';
          previewContainer.appendChild(note);
        }
        btn.innerHTML = originalText;
      });
    }

    // ãƒã‚¤ãƒ†ã‚£ãƒ–å…±æœ‰
    function nativeShare() {
      if (navigator.share) {
        navigator.share({
          title: "æ¨ã—ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼2â™¡",
          text: "æ¨ã—è‰²ã§ä½œã‚Œã‚‹ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å¸³ï¼ #æ¨ã—ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼",
          url: oshiMakerUrl
        });
      } else {
        alert("ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ğŸ’¦ URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼");
        navigator.clipboard.writeText(oshiMakerUrl);
      }
    }
  </script>
</body>
</html>
